<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <script src="https://kit.fontawesome.com/9d3f00a5c9.js" crossorigin="anonymous"></script>
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<style>
  .button {
    background-color: #1AF251;
    width: 200px;
    margin-left: 60px;
    text-align: center;
    border: 0px;
    height: 35px;
    border-radius: 10px;
    margin: 20px;
    z-index: 2;
  }

  .button:hover {
    background-color: #1A7AF2;
  }

  .copy {
    height: auto;
    overflow-x: auto;
    border: 2px solid black;
    word-break: strict;
    color: red;
    background-color: black;
    padding: 20px;
    border-radius: 5px;
    height: 100px;
    display: block;
  }

  img {
    width: 100%;
    height: 700px;
    overflow: auto;
    object-fit: contain;
  }

  li {
    text-transform: uppercase;
    font-weight: bold;
    font-family: sans-serif;
    text-decoration: underline rgba(0, 0, 0, 0.5)
  }

  .example {
    overflow: auto;
    background-color: black;
    color: yellow;
    width: 100%;
    font-size: 10px;
    padding-left: 4px;
  }

  span {
    font-size: 30px;
  }

  h1,
  h2,
  h3,
  h4 {
    font-size: 30px;
    text-decoration: underline blue;
  }

 #slide3,#slide1,
  .slide {
    width: 0;
   height: auto;
    position: absolute;
    overflow:hidden;
    z-index: 99;
    transition: 1s;
  }
.slide img{
  height:500px;
}
#slide1 img{
  height: 500px;
}
#slide3 img{
  height: 500px;
}
  .button1 {
    width: auto;
    padding: 16px;
    color: white;
    background-color: black;
    border: none;
    cursor: pointer;
    font-size: 20px;
    transition: 0.6s ease;
    border-radius: 0 3px 3px 0;
    right: 0;
    margin-top: 30px;
  }
 .socials{
   display: flex;
 }
 .socials a{
   margin-left: 30px;
   text-decoration: none;
   text-shadow: rgba(173, 120, 58, 1);
   border-radius: 50%;
   padding: 10px;
   font-size: 20px;
 }
 .fa-globe,.fa-whatsapp{
   color: white;
   background-color: green;
 }
 .fa-github{
   color:white;
   background-color: black;
 }
 i{
   font-size: 10px;
   text-decoration: none;
 }
</style>

<body>
  <h1>How to setup a database for your website- <i>this is where all the user-data for your website will be stored</i> </h1>
  <div class="socials">
    <a href="https://diskaunt18.me/contact" class="fa fa-globe"></a>
    <a href="https://infohub18.tech/contact"class="fa fa-globe"></a>
    <a href="https://github.com/manasess896" class="fa fa-github"></a>
    <a href="https://wa.me/+254114471302?text=Hey+about+firebase+database" class="fa fa-whatsapp"></a>
    
  </div>
  if it works get in touch if it doesn't work also get in touch. <hr>
<p>what type of data does firebase database store</p>
   <p>users profile,content data,users settings and preferences,Store real-time data such as chat messages, notifications, and live event updates,transactional data,analytics data,non personal identifiable information,personal identifiable information and others</p>
  <ol><li>creating a Firebase account:</li>
<p>Open your web browser and search for  Firebase .click on this result as shown in the picture below <img src="IMG-20240426-WA0003.jpg" alt="" />.</p>
<li>Sign In or Sign Up:</li>
<p>If you already have a Google account, click “Sign in” and use your existing credentials.
If you don’t have a Google account, click “Get started for free” to create one.
</p>
<li>Create a New Firebase Project:</li>
<p>Once you’re signed in, click the “Add project” button.</p>
<img src="IMG-20240426-WA0004(1).jpg" alt="" />
<p>Give your project a name (e.g., “My Awesome App”)
<img src="Screenshot_20240426-212250.jpg" alt="" />
and choose your preferred region.
Click “Continue.”</p>
<p>Enable Google Analytics (Optional):</p>
<p>You can enable Google Analytics for your project. It helps you track user engagement and app performance.</p>
<p>Choose whether to enable or skip this step.Am not going to dive into this right now so skip</p>
<p>Review the project settings and configuration. </p>
<p>Click “Create project.”</p>
<p>Your Firebase Project is Ready!:
Congratulations! You’ve successfully created a Firebase project.</p>
<p>You’ll be taken to the project dashboard, where you can explore various Firebase services.</p>
<li>Adding and connecting  Firebase to Your Web App:</li>
<p>on your dashboard,it will look something like this </p>
<img src="Screenshot_20240426-213151.jpg" alt="" />
<p>If you’re building a web app, click on the “Web” icon (</>) in the project overview.[there are other options such as apps ]</p>
<img src="IMG-20240426-WA0005(1).jpg" alt="" />
Register your app by providing a nickname (e.g., “My Web App”).
<img src="Screenshot_20240426-214521.jpg" alt="" />
<p>Adding firebase sdk codes to your actual website.This is where i come in.There are some codes you will be given such as api key ,app id and sdk modules if you are experienced and can use the sdk on your own go ahead but if you are not sure usey source code below this page and style it to your preferences</p>
<img src="Screenshot_20240426-214607.jpg" alt="sdk " />
<p>In the screen shot above  our source code we used script instead of npm and i did not use the Es6 modules and import statements instead import statements for Firebase SDKs were replaced with traditional script tags to include the Firebase JavaScript SDK directly in the HTML file. </p>
<p>click continue to console</p>
<li>Handling Realtime Updates:</li>
<p>The beauty of Firebase Realtime Database lies in its real-time synchronization.
When data changes, all connected clients receive updates instantly.This is where you can view users data eithe pii or non pii</p>
<p>lets setup our actual realtime database.</p>
<ul>
  <li>on your dashboard right click the menu button on the top-left(&#9776;)a side menu bar will open </li> <br><br>
  <li>Click on build ,a drop down opens then click on real time database </li>
  <img src="IMG-20240426-WA0006.jpg" alt="" />
  <img src="IMG-20240426-WA0007.jpg" alt="" />
  <li>on the new database click create dabase </li>
  <img src="Screenshot_20240426-221144.jpg" alt="" />
  <li>choose the location where your real time data will be stored </li>
  <img src="Screenshot_20240426-221208.jpg" alt="" />
  <li>security controls this part is important.if your website is still in development use test mode but remmember to change it back to locked mode after development.</li>
  <li>click enable.congratulations you now have a realtime database </li>
</ul>
<li>Getting started with connecting your website</li><p>Now what we need is to import your credentials to the source code i provided or your project .Below is the specific credentials you need to import for my source code to work </p>

<div class="example">
  apiKey: "zaSyAA9ctV1FMONj2jcOC7Y73sXywaJ8xhQgjiodfbdbbgg",
  authDomain: "manassesexampledatabase1.firebaseapp.com",
  databaseURL: "https://manasessexampledatabase1-default-rtdb.firebaseio.com",
  projectId: "manasesessexampledatabase1",
  storageBucket: "manasessexampledatabase1database1.appspot.com",
  messagingSenderId: "973763364544561",
  appId: "1:9563344561:web:e16c2426e5b68f870T568110916&t2g245"
};
</div>
<p>click the top-left menu button (&#9776;</p>
<p>At the top next to project overview there is a cogwheel like this <span> ⚙</span>Click it it will display a dropdown choose project settings.here yo will get all credentials you need to add  to your project or the source codes below . </p>
<li>Testing </li><p>After replacing the credentials respectively you can test by running your code after 5s go to your firbase account ,choose the project ,click on the side navigation bar ,choose build ,at the drop down choose realtime database here you will see data collected when you runned the code(You will only see the data if you programmed your javascript code to collect the data).I recommend using my source code first before writting any code for your database in order to understand this  </p>
</div>
</ol>
  <h2>COLLECTION OF NON PII DATA </h2>
  <div id="slide2" class="slide">
     <img src="IMG-20240427-WA0001.jpg" alt="" > 
    <button class="button" onclick="closeimg()" c>close image</button>
  </div>
  <p>
    cache <br>
    coockies <br>
    ip <br>
    users language <br>
    referer link <br>
    screen height and width <br>
    timestamp <br>
    url <br>
    user agent <br>
    visited time <br>
  </p>
  <div class="copy" id="content1">
    <pre>
&lt;!DOCTYPE html> 
&lt;html>

&lt;head> 
  &lt;meta charset="UTF-8"> 
  &lt;meta name="viewport" content="width=device-width, initial-scale=1"> 
  &lt;title>Storing Data in Firebase Database&lt;/title> 
&lt;/head> 

&lt;body>
  <!-- Firebase SDK -->
  &lt;script src="https://www.gstatic.com/firebasejs/7.14.6/firebase-app.js">&lt;/script>
  &lt;script src="https://www.gstatic.com/firebasejs/7.14.6/firebase-database.js">&lt;/script>
  &lt;script>
  //Replace with your actual credentials from firebase
    var firebaseConfig = {
      apiKey: "",
      authDomain: "",
      databaseURL: "",
      projectId: "",
      storageBucket: "",
      messagingSenderId: "",
      appId: "",
      measurementId: ""
    };

    firebase.initializeApp(firebaseConfig);
    var database = firebase.database();
    var currentTime = new Date().toLocaleString(); // Get current time

    function trackPageView() {
      // Fetch user's IP address using an external service
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          var pageViewRef = database.ref('pageViews').push();
          pageViewRef.set({
            url: window.location.href,
            timestamp: Date.now(),
            visitedTime: currentTime,
            userAgent: navigator.userAgent,
            screenWidth: window.screen.width,
            screenHeight: window.screen.height,
            referer: document.referrer,
            language: navigator.languages ? navigator.languages[0] : navigator.language,
            cookie: document.cookie,
            cache: JSON.stringify(window.performance.getEntriesByType('resource')),
            ip: data.ip // Set the fetched IP address
          });
        })
        .catch(error => {
          console.error('Error fetching IP address:', error);
        });
    }

    trackPageView();
  &lt;/script> 
&lt;/body>
&lt;/html>
</pre>
  </div>
  </div>

  <button class="button" onclick="copyToClipboard('content1')">Copy Code</button>
  <button class="button1" onclick="openimg()">view source code effect on the database</button>
  <h3>collection of NON PII DATA AND USERS CONSENT</h3>
   <div id="slide1">
    <img src="Screenshot_20240427-162201.jpg" alt="" /> <br>
    <button class="button" onclick="closeimg1()">close img</button>
  </div>
  <p>in this source we collect <br>
    cache <br>
    coockies <br>
    ip <br>
    users language <br>
    referer link <br>
    screen height and width <br>
    timestamp <br>
    url <br>
    user agent <br>
    visited time <br>
    users consent on terms of service


  </p>
  <div class="copy" id="content2">
    <pre>
&lt;!DOCTYPE html&gt; 
&lthtml>

&lt;head> 
  &lt;meta charset="UTF-8"> 
  &lt;meta name="viewport" content="width=device-width, initial-scale=1"> 
  &lt;title>storing data in firebase database&lt;/title> 
  &lt;/head> 
&lt;style> 
          .modal  {
            display: none;
            position: fixed; 
            color: black;
            top: 80%;
            z-index: 10;
           width: 300px;
           left:5%;
           right: 5%;
        }

        .modal-content {
            position: absolute;
            font-size: 13px;
            background-color: #fff;
            padding: 10px;
            width: 300px;
            border-radius: 8px;
            text-align: center;
        }

        .modal-content p {
            color: black;
            font-size: 13px;
        }

        /* Checkbox styles */
        .checkbox-label {
            color: black;
            font-size: 13px;
            display: block;
          
        }
&lt;/style>
&lt;body>
   &lt;div id="consentModal" class="modal">
    &lt;div class="modal-content">
      &lt;p>Please read and agree to our &lt;a href="term.html">terms of service.&lt;/a>&lt;/p>
      &lt;label class="checkbox-label">
        &lt;input onclick="closeModal()" type="checkbox" id="agreeCheckbox">
        &nbsp;&nbsp;&nbsp;I agree to the terms of service.
      &lt;/label>
    &lt;/div>
  &lt;/div>
  &lt;!-- Firebase SDK -->
  &lt;script src="https://www.gstatic.com/firebasejs/7.14.6/firebase-app.js">&lt;/script>
  &lt;script src="https://www.gstatic.com/firebasejs/7.14.6/firebase-database.js">&lt;/script>
&lt;script>
var firebaseConfig = {
//replace with your actual firebase cridentials
    apiKey: "",
    authDomain: "",
    databaseURL: "",
    projectId: "",
    storageBucket: "",
    messagingSenderId: "",
    appId: "",
    measurementId: ""
    };


firebase.initializeApp(firebaseConfig);
var database = firebase.database();
var currentTime = new Date().toLocaleString(); // Get current time

function trackPageView() {
    // Fetch user's IP address using an external service
    fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
            var pageViewRef = database.ref('pageViews').push();
            pageViewRef.set({
                url: window.location.href,
                timestamp: Date.now(),
                visitedTime: currentTime,
                userAgent: navigator.userAgent,
                screenWidth: window.screen.width,
                screenHeight: window.screen.height,
                referer: document.referrer,
                language: navigator.languages ? navigator.languages[0] : navigator.language,
                cookie: document.cookie,
                cache: JSON.stringify(window.performance.getEntriesByType('resource')),
                ip: data.ip // Set the fetched IP address
            });
        })
        .catch(error => {
            console.error('Error fetching IP address:', error);
        });
}

function closeModal() {
    if (document.getElementById('agreeCheckbox').checked) {
        localStorage.setItem('consentGiven', 'true');
        var consentRef = database.ref('consents').push();
        consentRef.set({
            timestamp: Date.now(),
            visitedTime: currentTime,
            userAgent: navigator.userAgent,
            ip: '', // Leave it empty here
            status: 'Agreed'
        });
    }
    setTimeout(() => {
        document.getElementById('consentModal').style.display = 'none';
        trackPageView();
    }, 2000); // Delay of 2000 milliseconds (2 seconds)
}

if (!localStorage.getItem('consentGiven')) {
    document.getElementById('consentModal').style.display = 'block';
} else {
    trackPageView();
}
   &lt;/script> 
   &lt;/body>
&lt;/html>
</pre>
  </div>

  <button class="button" onclick="copyToClipboard('content2')">Copy Code</button>
  <button class="button1" onclick="openimg1()">view how data will be collected by this code</button>
  <h4>Collection of login data </h4>
   <div id="slide3">
   <img src="IMG-20240427-WA0003.jpg" alt="" />
   <button class="button" onclick="closeimg3()">close image</button>
 </div>
  <p>in this source code we collect login or registration info .The source code collects:</p>
  <p>name <br>
    email <br>
    age <br>
    users terms of service consent <br>
    password
  </p>
  <div id="content3" class="copy">
    <pre>
      &lt;!DOCTYPE html> 
&lt;html>

&lt;head> 
  &lt;meta charset="UTF-8"> 
  &lt;meta name="viewport" content="width=device-width, initial-scale=1"> 
  &lt;title>Login Form with Firebase&lt;/title> 
&lt;/head> 

&lt;body>

  &lt;h2>Login Form&lt;/h2>

  &lt;form id="loginForm">
    &lt;label for="email">Email:&lt;/label>
    &lt;input type="email" id="email" name="email" required>&lt;br>&lt;br>

    &lt;label for="name">Name:&lt;/label>
    &lt;input type="text" id="name" name="name" required>&lt;br>&lt;br>

    &lt;label for="age">Age:&lt;/label>
    &lt;input type="number" id="age" name="age" required>&lt;br>&lt;br>

    &lt;label for="consent">Consent:&lt;/label>
    &lt;input type="checkbox" id="consent" name="consent" required> I agree to the terms and conditions.&lt;br>&lt;br>

    &lt;label for="password">Password:&lt;/label>
    &lt;input type="password" id="password" name="password" required>&lt;br>&lt;br>

    &lt;button type="submit">Login&lt;/button>
  &lt:/form>
  &lt;!--firebase sdk-->
  &lt;script src="https://www.gstatic.com/firebasejs/7.14.6/firebase-app.js">&lt;script>
  &lt;script src="https://www.gstatic.com/firebasejs/7.14.6/firebase-database.js">&lt;/script>
  &lt;script>
    var firebaseConfig = {
      // Replace with Your Firebase credentials
      apiKey: "",
    authDomain: "",
    databaseURL: "",
    projectId: "",
    storageBucket: "",
    messagingSenderId: "",
    appId: "",
    measurementId: ""
    };

   

    firebase.initializeApp(firebaseConfig);
    var database = firebase.database();

    document.getElementById('loginForm').addEventListener('submit', function(event) {
      event.preventDefault();

      // Get form values
      var email = document.getElementById('email').value;
      var name = document.getElementById('name').value;
      var age = document.getElementById('age').value;
      var consent = document.getElementById('consent').checked;
      var password = document.getElementById('password').value;

      // Store login data in Firebase
      var loginRef = database.ref('logins').push();
      loginRef.set({
        email: email,
        name: name,
        age: age,
        consent: consent,
        password: password
      });

      alert('Login data stored successfully!');
    });
  &lt;/script> 
&lt;/body>
&lt;/html>

    </pre>
  </div>
  <button class="button" onclick="copyToClipboard('content3')">Copy Code</button>
<button class="button1" onclick="openimg3()">View the effect of the  code to the database</button>
  </div>
  <script>
    function openimg() {
      document.getElementById('slide2').style.width = "100%";
    }

    function closeimg() {
      document.getElementById('slide2').style.width = "0px";
    }

    function openimg1() {
      document.getElementById('slide1').style.width = "100%";
    }
    function closeimg1(){
      document.getElementById('slide1').style.width="0px";
    }
    function openimg3(){
      document.getElementById('slide3').style.width="100%";
    }
    function closeimg3(){
      document.getElementById 
      ('slide3').style.width="0px"
    ;}

    function copyToClipboard(elementId) {
      // Select the text inside the specified element
      var copyText = document.getElementById(elementId);
      var range = document.createRange();
      range.selectNode(copyText);
      window.getSelection().removeAllRanges(); // Clear previous selections
      window.getSelection().addRange(range); // Add new selection

      // Copy the selected text to the clipboard
      document.execCommand("copy");

      // Deselect the text
      window.getSelection().removeAllRanges();
    }
  </script>
